<style>
    span.limit {
        /* if not, seems to apply 120% * 120% */
        font-size: 100%;
    }
    span.late {
        color: red;
    }
    span.close_to_limit {
        color: orange;
    }
    span.on_schedule {
        color: lime;
    }
</style>

<table class="table table-striped table-bordered table-condensed status translucent">
    <thead>
    <tr>
        <th rowspan="2">&nbsp;</th>
        <th>Rob. 1</th>
        <th>Rob. 2</th>
        <th>Rob. 3</th>
        <th>Expos√©</th>
    </tr>
    <tr class="planning">
        <th>&rarr;&nbsp;<span id="planning_rob1" class="limit">{{ planning.rob1 }}</span></th>
        <th>&rarr;&nbsp;<span id="planning_rob2" class="limit">{{ planning.rob2 }}</span></th>
        <th>&rarr;&nbsp;<span id="planning_rob3" class="limit">{{ planning.rob3 }}</span></th>
        <th>&rarr;&nbsp;<span id="planning_research" class="limit">{{ planning.research }}</span></th>
    </tr>
    </thead>
    <tbody>
    {% for item in progress %}
    <tr>
        <th class="team-name">{{ item.team_num }} - {{ item.team_name }}</th>
        <td><img src="/img/status-{{ item.rob1 }}.png"></td>
        <td><img src="/img/status-{{ item.rob2 }}.png"></td>
        <td><img src="/img/status-{{ item.rob3 }}.png"></td>
        <td><img src="/img/status-{{ item.research }}.png"></td>
    </tr>
    {% end %}
    </tbody>
</table>

<script type="text/javascript">
$(document).ready(function() {
    function to_minutes(s) {
        return parseInt(s.substr(0, 2)) * 60 + parseInt(s.substr(3, 2));
    }
    function check_if_late(elt, clock) {
        var limit = to_minutes(elt.text());
        if (limit - clock > 10) {
            // we have time for the moment
            elt.addClass("on_schedule");
        } else if (limit - clock > 0) {
            // close to the limit
            elt.addClass("close_to_limit");
        } else {
            // we are late
            elt.addClass("late");
        }
    }
    var clock = to_minutes($("#clock").text());
    $("span.limit").each(function(index) {
        check_if_late($(this), clock);
    });
});
</script>
